import{b as C,j as e,a as y,r as n,H as _}from"./app-StHp4lGL.js";import{N as D}from"./NavBar-BZTDjxhM.js";import{C as S}from"./Container-BH8gv93r.js";import{d as E}from"./index-CCyPu_cu.js";/* empty css                      */const A=({id:t,title:o,description:l,image:p,onEdit:d,onDelete:i})=>{const{auth:g}=C().props,f=g.user?.user_type==="manager",x=()=>{y.visit(route("categories.show",t))};return e.jsxs("div",{className:"category-card-item",children:[e.jsx("img",{src:p,className:"category-card-img",alt:o,onClick:x}),e.jsxs("div",{className:"category-card-body",children:[e.jsxs("div",{onClick:x,children:[e.jsx("h5",{className:"category-card-title",children:o}),e.jsx("p",{className:"category-card-text",children:l})]}),f?e.jsxs("div",{className:"category-card-actions",style:{marginTop:"10px",display:"flex",gap:"5px"},children:[e.jsx("button",{className:"btn btn-primary btn-sm",onClick:c=>{c.stopPropagation(),d()},children:"Edit"}),e.jsx("button",{className:"btn btn-danger btn-sm",onClick:c=>{c.stopPropagation(),i()},children:"Delete"})]}):null]})]})},P=({id:t,title:o,description:l,image:p,isSelected:d,selectable:i,onEdit:g,onDelete:m})=>e.jsx("div",{style:{cursor:"pointer",border:i?d?"2px solid #0d6efd":"2px dashed transparent":"none",borderRadius:8,padding:i?4:0},children:e.jsx(A,{id:t,image:p,title:o,description:l,onEdit:g,onDelete:m})}),M=({onClose:t})=>{const[o,l]=n.useState(""),[p,d]=n.useState(""),[i,g]=n.useState(null),[m,f]=n.useState(""),[x,c]=n.useState(!1),h=()=>{if(!o||!p||!i)return alert("All fields are required!");const s=new FormData;s.append("category_name",o),s.append("category_description",p),s.append("category_photo",i),c(!0),E.Inertia.post(route("categories.store"),s,{onSuccess:()=>{c(!1),t()},onError:()=>c(!1)})};return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content add-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Add Category"}),e.jsx("button",{className:"close-btn fs-2",onClick:t,children:"×"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("label",{children:"Category Name"}),e.jsx("input",{value:o,onChange:s=>l(s.target.value)}),e.jsx("label",{children:"Category Description"}),e.jsx("textarea",{value:p,onChange:s=>d(s.target.value)}),e.jsxs("div",{className:"file-upload",children:[e.jsxs("label",{className:"upload-btn",children:["Upload Photo",e.jsx("input",{type:"file",hidden:!0,onChange:s=>{g(s.target.files[0]),f(s.target.files[0].name)}})]}),m&&e.jsx("span",{className:"file-name",children:m})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-success",onClick:h,disabled:x,children:x?"Adding...":"Add Category"}),e.jsx("button",{className:"btn btn-outline-secondary",onClick:t,children:"Cancel"})]}),e.jsx("style",{children:`
          .add-modal { width:420px; background:#e6f4ea; border-radius:14px; box-shadow:0 20px 40px rgba(46,204,113,0.2); animation: scaleIn 0.2s ease; }
          .add-modal .modal-header { background:linear-gradient(135deg,#2ecc71,#27ae60); color:white; padding:16px 20px; border-radius:14px 14px 0 0; display:flex; justify-content:space-between; align-items:center; }
          .close-btn { background:transparent; border:none; color:white; font-size:22px; cursor:pointer; }
          .modal-body { padding:20px; }
          .modal-body label { font-weight:600; margin-top:12px; display:block; }
          .modal-body input, .modal-body textarea { width:100%; margin-top:6px; padding:10px 12px; border-radius:8px; border:1px solid #ced4da; }
          .modal-body input:focus, .modal-body textarea:focus { outline:none; border-color:#27ae60; }
          .file-upload { margin-top:16px; display:flex; align-items:center; gap:10px; }
          .upload-btn { background-color:#27ae60; color:white; padding:8px 14px; border-radius:8px; cursor:pointer; font-weight:500; }
          .file-name { font-size:0.9rem; color:#495057; }
          .modal-footer { padding:16px 20px; display:flex; justify-content:flex-end; gap:10px; border-top:1px solid #dee2e6; }
          @keyframes scaleIn { from { transform:scale(0.9); opacity:0; } to { transform:scale(1); opacity:1; } }
        `})]})})},F=({category:t,onClose:o})=>{const[l,p]=n.useState(t.category_name||""),[d,i]=n.useState(t.category_description||""),[g,m]=n.useState(null),[f,x]=n.useState(""),[c,h]=n.useState(!1),s=()=>{const r=new FormData;r.append("category_name",l),r.append("category_description",d),g&&r.append("category_photo",g),r.append("_method","put"),h(!0),y.post(route("categories.update",t.category_id),r,{forceFormData:!0,onSuccess:()=>{h(!1),o()},onError:()=>h(!1)})};return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content edit-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Edit Category"}),e.jsx("button",{className:"close-btn fs-2",onClick:o,children:"×"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("label",{children:"Category Name"}),e.jsx("input",{value:l,onChange:r=>p(r.target.value)}),e.jsx("label",{children:"Category Description"}),e.jsx("textarea",{value:d,onChange:r=>i(r.target.value)}),e.jsxs("div",{className:"file-upload",children:[e.jsxs("label",{className:"upload-btn",children:["Upload Photo",e.jsx("input",{type:"file",hidden:!0,onChange:r=>{m(r.target.files[0]),x(r.target.files[0].name)}})]}),f&&e.jsx("span",{className:"file-name",children:f})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-primary",onClick:s,disabled:c,children:c?"Saving...":"Save Changes"}),e.jsx("button",{className:"btn btn-outline-secondary",onClick:o,children:"Cancel"})]}),e.jsx("style",{children:`
          .edit-modal { width: 420px; background: #f0f5ff; border-radius: 14px; box-shadow: 0 20px 40px rgba(13,110,253,0.2); animation: scaleIn 0.2s ease; }
          .edit-modal .modal-header { background: linear-gradient(135deg,#0d6efd,#0b5ed7); color:white; padding:16px 20px; border-radius:14px 14px 0 0; display:flex; justify-content:space-between; align-items:center; }
          .close-btn { background:transparent; border:none; color:white; font-size:22px; cursor:pointer; }
          .modal-body { padding:20px; }
          .modal-body label { font-weight:600; margin-top:12px; display:block; }
          .modal-body input, .modal-body textarea { width:100%; margin-top:6px; padding:10px 12px; border-radius:8px; border:1px solid #ced4da; }
          .modal-body input:focus, .modal-body textarea:focus { outline:none; border-color:#0d6efd; }
          .file-upload { margin-top:16px; display:flex; align-items:center; gap:10px; }
          .upload-btn { background-color:#0d6efd; color:white; padding:8px 14px; border-radius:8px; cursor:pointer; font-weight:500; }
          .file-name { font-size:0.9rem; color:#495057; }
          .modal-footer { padding:16px 20px; display:flex; justify-content:flex-end; gap:10px; border-top:1px solid #dee2e6; }
          @keyframes scaleIn { from { transform:scale(0.9); opacity:0; } to { transform:scale(1); opacity:1; } }
        `})]})})},I=({categoryName:t,onConfirm:o,onClose:l})=>e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content red-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Delete Category"}),e.jsx("button",{className:"close-btn fs-2",onClick:l,children:"×"})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("p",{children:['Are you sure you want to delete "',e.jsx("strong",{children:t}),'" and all its items?']})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-danger",onClick:o,children:"Delete"}),e.jsx("button",{className:"btn btn-outline-secondary",onClick:l,children:"Cancel"})]}),e.jsx("style",{children:`
          .red-modal { width: 420px; background: #fff5f5; border-radius: 14px; box-shadow: 0 20px 40px rgba(220,53,69,0.2); animation: scaleIn 0.2s ease; }
          .modal-header { background: linear-gradient(135deg, #dc3545, #b02a37); color: white; padding: 16px 20px; border-radius: 14px 14px 0 0; display: flex; justify-content: space-between; align-items: center; }
          .close-btn { background: transparent; border: none; color: white; font-size: 22px; cursor: pointer; }
          .modal-body { padding: 20px; font-size: 1rem; }
          .modal-footer { padding: 16px 20px; display: flex; justify-content: flex-end; gap: 10px; border-top: 1px solid #dee2e6; }
          @keyframes scaleIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        `})]})}),U=()=>{const{categories:t}=C().props,{auth:o}=C().props,p=o.user?.user_type==="manager",[d,i]=n.useState(null),[g,m]=n.useState(!1),[f,x]=n.useState(!1),[c,h]=n.useState(!1),s=()=>m(!0),r=a=>{i(a),x(!0)},N=a=>{i(a),h(!0)},v=({name:a,description:j,photo:b})=>{const u=new FormData;u.append("category_name",a),u.append("category_description",j),b&&u.append("category_photo",b),y.post(route("categories.store"),u,{headers:{"Content-Type":"multipart/form-data"}}),m(!1)},w=({name:a,description:j,photo:b})=>{const u=new FormData;u.append("category_name",a),u.append("category_description",j),b&&u.append("category_photo",b),u.append("_method","PATCH"),y.post(route("categories.update",d.category_id),u,{headers:{"Content-Type":"multipart/form-data"}}),x(!1)},k=()=>{y.delete(route("categories.destroy",d.category_id)),h(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(_,{title:"مركز وسائل الإيضاح"}),e.jsx(D,{page_name:"categories"}),e.jsxs(S,{children:[e.jsx("h2",{style:{marginTop:24},children:"Categories"}),p?e.jsx("div",{style:{marginTop:"16px",marginBottom:"32px",display:"flex",gap:"10px"},children:e.jsx("button",{className:"btn btn-success",onClick:s,children:"Add Category"})}):null,e.jsx("div",{className:"row",children:t.map(a=>e.jsx("div",{className:"col-6 col-md-4 col-lg-3 mb-4",children:e.jsx(P,{id:a.category_id,title:a.category_name,description:a.category_description,image:a.category_photo?`storage/${a.category_photo}`:"/imgs/shopping.webp",onEdit:()=>r(a),onDelete:()=>N(a)},a.category_id)},a.category_id))}),g&&e.jsx(M,{onClose:()=>m(!1),onConfirm:v}),f&&e.jsx(F,{onClose:()=>x(!1),category:d,onConfirm:w}),c&&e.jsx(I,{onClose:()=>h(!1),onConfirm:k,categoryName:d?.category_name})]})]})};export{U as default};
