import{j as e,b as w,r as i,H as k,a as h}from"./app-StHp4lGL.js";import{N as C}from"./NavBar-BZTDjxhM.js";/* empty css                      */import"./Container-BH8gv93r.js";const U=({userNmae:l,onConfirm:a,onClose:t})=>e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content red-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Delete User"}),e.jsx("button",{className:"close-btn fs-2",onClick:t,children:"×"})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("p",{children:['Are you sure you want to delete "',e.jsx("strong",{children:l}),'"?']})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-danger",onClick:a,children:"Delete"}),e.jsx("button",{className:"btn btn-outline-secondary",onClick:t,children:"Cancel"})]}),e.jsx("style",{children:`
          .red-modal { width: 420px; background: #fff5f5; border-radius: 14px; box-shadow: 0 20px 40px rgba(220,53,69,0.2); animation: scaleIn 0.2s ease; }
          .modal-header { background: linear-gradient(135deg, #dc3545, #b02a37); color: white; padding: 16px 20px; border-radius: 14px 14px 0 0; display: flex; justify-content: space-between; align-items: center; }
          .close-btn { background: transparent; border: none; color: white; font-size: 22px; cursor: pointer; }
          .modal-body { padding: 20px; font-size: 1rem; }
          .modal-footer { padding: 16px 20px; display: flex; justify-content: flex-end; gap: 10px; border-top: 1px solid #dee2e6; }
          @keyframes scaleIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        `})]})}),P=({editData:l,editErrors:a,onChange:t,onSubmit:r,onClose:c})=>e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content edit-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Edit User"}),e.jsx("button",{className:"close-btn fs-2",onClick:c,children:"×"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("label",{children:"Name"}),e.jsx("input",{type:"text",value:l.name,onChange:n=>t("name",n.target.value),className:a.full_name?"is-invalid":""}),a.full_name&&e.jsx("div",{className:"invalid-feedback",children:a.full_name}),e.jsx("label",{children:"Email"}),e.jsx("input",{type:"email",value:l.email,onChange:n=>t("email",n.target.value),className:a.email?"is-invalid":""}),a.email&&e.jsx("div",{className:"invalid-feedback",children:a.email}),e.jsx("label",{children:"Phone"}),e.jsx("input",{type:"tel",value:l.phone,maxLength:11,onChange:n=>t("phone",n.target.value),className:a.mobile?"is-invalid":""}),a.mobile&&e.jsx("div",{className:"invalid-feedback",children:a.mobile}),e.jsx("label",{children:"Role"}),e.jsxs("select",{value:l.user_type,onChange:n=>t("user_type",n.target.value),className:a.user_type?"is-invalid":"",children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"manager",children:"Manager"})]}),a.user_type&&e.jsx("div",{className:"invalid-feedback",children:a.user_type}),e.jsx("label",{children:"Family Code"}),e.jsx("input",{type:"text",value:l.osra_code||"",onChange:n=>t("osra_code",n.target.value),className:a.osra_code?"is-invalid":""}),a.osra_code&&e.jsx("div",{className:"invalid-feedback",children:a.osra_code}),e.jsxs("div",{className:"file-upload",children:[e.jsxs("label",{className:"upload-btn",children:["Upload Photo",e.jsx("input",{type:"file",hidden:!0,onChange:n=>t("profilePhoto",n.target.files[0])})]}),l.profilePhoto&&e.jsx("span",{className:"file-name",children:l.profilePhoto.name})]}),l.profilePhoto&&e.jsx("img",{src:URL.createObjectURL(l.profilePhoto),className:"rounded mt-2",width:"80"})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-primary",onClick:r,children:"Save Changes"}),e.jsx("button",{className:"btn btn-outline-secondary",onClick:c,children:"Cancel"})]}),e.jsx("style",{children:`
          .edit-modal { 
            width: 450px; 
            max-height: 80vh; 
            background: #f0f5ff; 
            border-radius: 14px; 
            box-shadow: 0 20px 40px rgba(13,110,253,0.2); 
            animation: scaleIn 0.2s ease; 
            display: flex; 
            flex-direction: column;
          }
          .edit-modal .modal-header { 
            background: linear-gradient(135deg,#0d6efd,#0b5ed7); 
            color:white; 
            padding:16px 20px; 
            border-radius:14px 14px 0 0; 
            display:flex; 
            justify-content:space-between; 
            align-items:center; 
            flex-shrink: 0;
          }
          .close-btn { background:transparent; border:none; color:white; font-size:22px; cursor:pointer; }
          .modal-body { padding:20px; display:flex; flex-direction:column; gap:12px; overflow-y:auto; }
          .modal-body label { font-weight:600; }
          .modal-body input, .modal-body select { width:100%; padding:10px 12px; border-radius:8px; border:1px solid #ced4da; }
          .modal-body input:focus, .modal-body select:focus { outline:none; border-color:#0d6efd; }
          .file-upload { margin-top:8px; display:flex; align-items:center; gap:10px; }
          .upload-btn { background-color:#0d6efd; color:white; padding:8px 14px; border-radius:8px; cursor:pointer; font-weight:500; }
          .file-name { font-size:0.9rem; color:#495057; }
          .modal-footer { padding:16px 20px; display:flex; justify-content:flex-end; gap:10px; border-top:1px solid #dee2e6; flex-shrink: 0; }
          @keyframes scaleIn { from { transform:scale(0.9); opacity:0; } to { transform:scale(1); opacity:1; } }
        `})]})}),R=()=>{const{users:l,osras:a}=w().props,[t,r]=i.useState(!1),[c,n]=i.useState(null),[f,m]=i.useState(!1),[p,x]=i.useState(null),[d,u]=i.useState({name:"",email:"",phone:"",user_type:"user",osra_id:"",profilePhoto:null}),[j,b]=i.useState({}),g=s=>{x(s),m(!0)},v=()=>{p&&h.delete(route("users.destroy",p.user_id),{onSuccess:()=>{m(!1),x(null)},onError:s=>{console.error(s),m(!1),x(null)},preserveScroll:!0})},y=s=>{n(s),u({name:s.full_name,email:s.email,phone:s.mobile,user_type:s.user_type||"user",osra_id:s.osra?.osra_id||"",profilePhoto:null}),b({}),r(!0)},N=s=>{s.preventDefault();const o=new FormData;o.append("_method","PUT"),o.append("full_name",d.name||""),o.append("email",d.email||""),o.append("mobile",d.phone||""),o.append("user_type",d.user_type||""),o.append("osra_code",d.osra_code||""),d.profilePhoto&&o.append("profilePhoto",d.profilePhoto),h.post(route("users.update",c.user_id),o,{forceFormData:!0,onError:_=>b(_),onSuccess:()=>r(!1)})};return e.jsxs("div",{className:"bg-light min-vh-100",children:[e.jsx(k,{title:"مركز وسائل الإيضاح"}),e.jsx(C,{page_name:"users"}),e.jsxs("div",{className:"container py-5",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("h2",{className:"fw-bold mb-1",children:"Users Management"}),e.jsx("small",{className:"text-muted",children:"Manage all registered users"})]}),e.jsx("button",{className:"btn btn-success px-4",onClick:()=>h.visit(route("register")),children:"Add User"})]}),e.jsx("div",{className:"card shadow-sm border-0",children:e.jsx("div",{className:"card-body p-0",children:l.length?e.jsx("div",{className:"users-table-container",children:e.jsxs("table",{className:"table table-hover align-middle mb-0 users-table",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"User"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Mobile"}),e.jsx("th",{children:"Email"}),e.jsx("th",{className:"text-center",children:"Actions"})]})}),e.jsx("tbody",{children:l.map((s,o)=>e.jsxs("tr",{children:[e.jsx("td",{className:"fw-semibold",children:o+1}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[s.user_photo?e.jsx("img",{src:s.user_photo,alt:s.full_name,className:"user-avatar rounded-circle border"}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"user-avatar-icon bi bi-person-circle",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0"}),e.jsx("path",{fillRule:"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"})]}),e.jsx("span",{className:"fw-semibold",children:s.full_name})]})}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-secondary",children:s.user_type})}),e.jsx("td",{children:s.mobile}),e.jsx("td",{children:s.email}),e.jsx("td",{className:"text-center user-actions",children:e.jsxs("div",{className:"d-flex justify-content-center gap-2 action-buttons flex-wrap",children:[e.jsx("button",{className:"btn btn-sm btn-primary px-2",onClick:()=>y(s),children:"Edit"}),e.jsx("button",{className:"btn btn-sm btn-danger px-2",onClick:()=>g(s),children:"Delete"})]})})]},s.user_id))})]})}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx("i",{className:"bi bi-people display-4 text-muted"}),e.jsx("p",{className:"mt-3 text-muted fw-semibold",children:"No users found"})]})})})]}),t&&e.jsx(P,{editData:{...d,osras:a},editErrors:j,onChange:(s,o)=>u({...d,[s]:o}),onSubmit:N,onClose:()=>r(!1)}),f&&p&&e.jsx(U,{userNmae:p.full_name,onConfirm:v,onClose:()=>m(!1)})]})};export{R as default};
