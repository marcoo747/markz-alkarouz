import{j as e,a as _,r as m,b as T,H as F}from"./app-F9mGVywk.js";import{N as S}from"./NavBar-BRLkNves.js";import{C as O}from"./Container-Cdm_3uio.js";import{n as D}from"./index-DVAfsfYP.js";const E=({id:u,title:r,brand:l,description:a,image:n,onRemove:i,color:d,size:o,quantity:h})=>{const c=()=>{_.get(route("items.show",u))};return e.jsxs("article",{className:"card product-card h-100 p-1 cursor-pointer",children:[n&&e.jsx("img",{src:n,alt:r,loading:"lazy",onClick:c,className:"rounded w-full h-48 object-cover"}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{onClick:c,children:[e.jsx("h3",{className:"card-title",children:r}),e.jsx("h6",{className:"card-title",children:l}),e.jsx("p",{className:"card-desc",children:a}),d&&e.jsxs("p",{className:"d-flex align-items-center mb-1",children:[e.jsx("span",{style:{display:"inline-block",width:16,height:16,borderRadius:"50%",backgroundColor:d.color,marginRight:8,border:"1px solid #ccc"}}),e.jsx("span",{children:D(d).basic[0].name})]}),o&&e.jsxs("p",{className:"mb-1",children:["Size: ",e.jsx("strong",{children:o.size})]}),h!==void 0&&e.jsxs("p",{className:"mb-2",children:["Quantity: ",e.jsx("span",{className:"badge bg-primary",children:h})]})]}),e.jsx("button",{className:"btn btn-danger w-100",onClick:s=>{s.stopPropagation(),i()},children:"Remove"})]})]})},w="_modalOverlay_dss6l_1",B="_addModal_dss6l_16",z="_modalHeader_dss6l_28",P="_modalBody_dss6l_39",G="_modalFooter_dss6l_64",H="_optionGroup_dss6l_85",x={modalOverlay:w,addModal:B,modalHeader:z,modalBody:P,modalFooter:G,optionGroup:H},M=({total:u,user:r,onClose:l,osraTime:a})=>{const[n,i]=m.useState(""),[d,o]=m.useState(""),[h,c]=m.useState(""),[s,p]=m.useState(""),[v,b]=m.useState(""),[C,g]=m.useState(!1),[j,y]=m.useState("osraTime"),N=new Date().toISOString().split("T")[0],f=t=>{t.preventDefault(),g(!0),_.post(route("requests.createFromCart"),{full_name:r?.full_name||"",osra_code:null,start_date:d,end_date:s,start_time:h,end_time:v,total_price:u},{onSuccess:()=>{l(),i(""),o(""),p(""),c(""),b("")},onFinish:()=>g(!1)})},k=t=>{t.preventDefault(),g(!0),_.post(route("requests.createFromCart"),{full_name:r?.full_name||"",osra_code:n.trim(),osra_time:a,total_price:n.trim()?0:u},{onSuccess:()=>{l(),i(""),o(""),p(""),c(""),b("")},onFinish:()=>g(!1)})};return e.jsx("div",{className:x.modalOverlay,children:e.jsxs("div",{className:`${x.addModal}`,children:[e.jsxs("div",{className:x.modalHeader,children:[e.jsx("h3",{children:"Booking Details"}),e.jsx("button",{className:"close-btn fs-2",onClick:l,children:"×"})]}),e.jsxs("div",{className:x.modalBody,children:[e.jsxs("div",{className:x.optionGroup,children:[e.jsx("input",{type:"radio",id:"osra_Time",name:"timeOption",value:"osraTime",checked:j==="osraTime",onChange:()=>y("osraTime")}),e.jsx("label",{htmlFor:"osra_Time",children:"Family Time"}),e.jsx("input",{type:"radio",id:"Custom_time",name:"timeOption",value:"customTime",checked:j==="customTime",onChange:()=>y("customTime")}),e.jsx("label",{htmlFor:"Custom_time",children:"Custom Time"})]}),j==="osraTime"&&e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"osra_time",children:"Family Time"}),e.jsx("input",{type:"text",id:"osra_time",value:a,readOnly:!0}),e.jsx("label",{htmlFor:"osra_code_one",children:"Family Code"})," ",e.jsx("input",{type:"text",value:n,id:"osra_code_one",onChange:t=>i(t.target.value),placeholder:"Enter Osra Code"})]}),j==="customTime"&&e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"start_date",children:"Start Date"}),e.jsx("input",{id:"start_date",type:"date",min:N,value:d,onChange:t=>o(t.target.value)}),e.jsx("label",{htmlFor:"start_time",children:"Start Time"}),e.jsx("input",{id:"start_time",type:"time",value:h,onChange:t=>c(t.target.value)}),e.jsx("label",{htmlFor:"end_date",children:"End Date"}),e.jsx("input",{type:"date",id:"end_date",min:N,value:s,onChange:t=>p(t.target.value)}),e.jsx("label",{htmlFor:"end_time",children:"End Time"}),e.jsx("input",{id:"end_time",type:"time",value:v,onChange:t=>b(t.target.value)})]}),e.jsxs("p",{className:"mt-2",children:["Total Amount: EGP ",u]})]}),e.jsxs("div",{className:x.modalFooter,children:[e.jsx("button",{disabled:C,className:"btn btn-success",onClick:j==="osraTime"?k:f,children:C?"Booking...":"Confirm Booking"}),e.jsx("button",{className:"btn btn-outline-secondary",onClick:l,children:"Cancel"})]})]})})},Y=()=>{const{cart:u,user:r,osra_time:l}=T().props,a=u?.products??[],{errors:n}=T().props,i=a.reduce((s,p)=>s+Number(p.pr_price),0),[d,o]=m.useState(!1),h=s=>{_.delete(route("cart.remove"),{data:{product_id:s},preserveScroll:!0})},c=s=>{_.post(route("requests.createFromCart"),s,{preserveScroll:!0,onSuccess:()=>o(!1)})};return console.log(a),e.jsxs(e.Fragment,{children:[e.jsx(F,{title:"مركز وسائل الإيضاح"}),e.jsx(S,{page_name:"cart"}),e.jsxs(O,{children:[e.jsx("h2",{className:"mt-6",children:"Your Cart"}),a.length===0&&e.jsx("p",{children:"Your cart is empty."}),e.jsx("div",{className:"row",children:a.map(s=>{const p=s.images&&s.images.length>0?`/markaz_alkarouz/public/storage/${s.images[0].photo}`:"/markaz_alkarouz/public/imgs/shopping.webp";return e.jsx("div",{className:"col-6 col-md-4 col-lg-3 mb-4",children:e.jsx(E,{id:s.product_id,title:s.pr_name,brand:s.brand,color:s.pivot.color,size:s.pivot.size,quantity:s.pivot.quantity,description:`Price: EGP ${s.pr_price}`,image:p,onRemove:()=>h(s.product_id)})},s.product_id)})}),a.length>0&&e.jsxs("div",{className:"text-right mt-6",children:[e.jsxs("h4",{children:["Total: EGP ",i]}),e.jsx("button",{className:"btn btn-success",onClick:()=>o(!0),children:"Checkout"})]}),d&&r&&e.jsx(M,{errors:n,total:i,user:r,onClose:()=>o(!1),onConfirm:c,osraTime:l})]})]})};export{Y as default};
